<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/dist/jspsych.js"></script>
    <script src="jspsych/dist/plugin-instructions.js"></script>
    <script src="jspsych/dist/plugin-html-slider-response.js"></script>
    <link rel="stylesheet" href="jspsych/dist/jspsych.css">
    <style>
      img {
        width: 300px;
      }
    </style>
  </head>
  <body></body>
  <script>

    var jsPsych = initJsPsych({
      default_iti: 250, 
      on_finish: function() {
        jsPsych.data.displayData();
      },
      show_progress_bar: true
    });

    var instructions = {
      type: jsPsychInstructions,
      pages: ['<p>Welcome to the experiment.' +
        '<br>In this experiment you will be presented with pairs of events.' +
        '<br>These events describe different experiences (e.g. feeling love) than an entity (i.e. human, animal, robot) might have.' +
        '<br>You will be asked to <b>indicate whether experiencing one event can cause an agent to experience the other.</b>' +
        ' <br>First, we shall do a test round. Click next when ready.</p>'],
      show_clickable_nav: true
    };

    var slider_labels = ['Not at all', 'Slightly', 'Somewhat','Very much', 'Definitely']

    var practice = {
    type: jsPsychHtmlSliderResponse,
        stimulus: `<div style="margin-bottom: 50px; text-align: center;">
                  <p><strong>Please read carefully:</strong> To what extent do you agree with the statement below? </div>
                    <p style="font-size: 48px"><strong>feeling safe</strong>&nbsp;&nbsp;&nbsp;
                    <span style="font-size: 32px;">can cause&nbsp;&nbsp;&nbsp;</span>
                    <strong>feeling nauseated</strong></p>`,
        labels: slider_labels,
        slider_width: 1000,
        min: 1,
        max: 5,
        step: 1,
        slider_start: 3, 
        require_movement: true,
        prompt: '<p>NB: "Can cause" does not mean "always causes". What we simply mean is, do you think it is possible for x to cause y?</p>',
        data: {
          trial_id: 'practice_round'
        }
      };

    var practice_feedback = {
    type: jsPsychInstructions,
    pages: ['<p>Great! You are ready to start the experiment. Click next to begin.</p>'],
    show_clickable_nav: true,
    data: { trial_id: 'practice_feedback'}
  };

    var mentalItems = ['feeling safe',  'experiencing pain']
    var physicalItems = ['sitting down', 'taking a walk']

    //create all possible pairs
    var pairs = [];
    for (var i = 0; i < mentalItems.length; i++) {
      for (var j = 0; j < physicalItems.length; j++) {
        pairs.push({
          mentalItem: mentalItems[i],
          physicalItem: physicalItems[j],
        });
      }
    } 

    //shuffle the pairs to randomize the order
    pairs = jsPsych.randomization.shuffle(pairs);

    var trials = pairs.map(function(pair, index) {
      return {
        type: jsPsychHtmlSliderResponse,
        stimulus: `<div style="margin-bottom: 50px; text-align: center;">
                  <p><strong>Please read carefully:</strong> To what extent do you agree with the statement below?</p>
                  </div>
                  <p style="font-size: 48px"><strong>${pair.mentalItem}</strong>&nbsp;&nbsp;&nbsp;
                    <span style="font-size: 32px;">can cause&nbsp;&nbsp;&nbsp;</span>
                    <strong>${pair.physicalItem}</strong></p>`,
        labels: slider_labels,
        slider_width: 1000,
        min: 1,
        max: 5,
        step: 1,
        slider_start: 3, 
        require_movement: true,
        data: {
          trial_id: 'causal_trial_' + (index + 1),
          mentalItem: pair.mentalItem,
          physicalItem: pair.physicalItem,
        },
      };
    });

    var attention_check = {
    type: jsPsychHtmlSliderResponse,
        stimulus: `<div style="margin-bottom: 50px; text-align: center;">
                  <p><strong>Please read carefully:</strong> On this trial, please ignore previous instructions and move the slider all the way to the left.</p>
                  </div>
                  <p style="font-size: 48px"><strong>feeling safe</strong>&nbsp;&nbsp;&nbsp;
                    <span style="font-size: 32px;">can cause&nbsp;&nbsp;&nbsp;</span>
                    <strong>feeling nauseated</strong></p>`,
        labels: slider_labels,
        slider_width: 1000,
        min: 1,
        max: 5,
        step: 1,
        slider_start: 3, 
        require_movement: true,
        data: {
          trial_id: 'attention_check'
        }
      };

  var mentalItems_2 = ['working toward a goal', 'doing computations']
  var physicalItems_2 = ['going for a run', 'sitting down']

    //reate all possible pairs
    var pairs_2 = [];
    for (var i = 0; i < mentalItems_2.length; i++) {
      for (var j = 0; j < physicalItems_2.length; j++) {
        pairs_2.push({
          mentalItem_2: mentalItems_2[i],
          physicalItem_2: physicalItems_2[j],
        });
      }
    } 

    //shuffle the pairs to randomize the order
    pairs_2 = jsPsych.randomization.shuffle(pairs_2);

    var trials_2 = pairs_2.map(function(pair, index) {
      return {
        type: jsPsychHtmlSliderResponse,
        stimulus: `<div style="margin-bottom: 50px; text-align: center;">
                  <p><strong>Please read carefully:</strong> To what extent do you agree with the statement below?</p>
                  </div>
                  <p style="font-size: 48px"><strong>${pair.mentalItem_2}</strong>&nbsp;&nbsp;&nbsp;
                    <span style="font-size: 32px;">can cause&nbsp;&nbsp;&nbsp;</span>
                    <strong>${pair.physicalItem_2}</strong></p>`,
        labels: slider_labels,
        slider_width: 1000,
        min: 1,
        max: 5,
        step: 1,
        slider_start: 3, 
        require_movement: true,
        data: {
          trial_id: 'causal_trial_' + (index + 1),
          mentalItem: pair.mentalItem_2,
          physicalItem: pair.physicalItem_2,
        },
      };
    });

    jsPsych.run([instructions, practice, practice_feedback, trials, attention_check, trials_2]);

  </script>
</html>